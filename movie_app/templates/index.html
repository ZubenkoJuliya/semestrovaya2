{% extends "base.html" %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è - –ö–∏–Ω–æ—Ç–µ–∞—Ç—Ä{% endblock %}

{% block content %}
<div class="hero">
    <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ö–∏–Ω–æ—Ç–µ–∞—Ç—Ä!</h1>
    <p>–û—Ç–∫—Ä–æ–π—Ç–µ –¥–ª—è —Å–µ–±—è –ª—É—á—à–∏–µ —Ñ–∏–ª—å–º—ã –≤—Å–µ—Ö –≤—Ä–µ–º–µ–Ω</p>
</div>

{% if current_user.is_admin %}
<div class="admin-stats">
    <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∞)</h2>
    <div class="stats">
        <div class="stat-card">
            <h3>{{ movie_count }}</h3>
            <p>–§–∏–ª—å–º–æ–≤ –≤ –±–∞–∑–µ</p>
        </div>
        <div class="stat-card">
            <h3>{{ user_count }}</h3>
            <p>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
        </div>
        <div class="stat-card">
            <h3>{{ review_count }}</h3>
            <p>–û—Ç–∑—ã–≤–æ–≤</p>
        </div>
    </div>
</div>
{% endif %}

<h2>üî• –¢–æ–ø —Ñ–∏–ª—å–º–æ–≤</h2>
<div class="movies-grid">
    {% for movie in top_movies %}
    <div class="movie-card">
        {% if current_user.is_authenticated %}
        <div class="movie-actions">
            <form action="{{ url_for('toggle_favorite', movie_id=movie.id) }}" method="POST" class="favorite-form">
                <button type="submit" class="favorite-btn" title="–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ">
                    ‚òÜ
                </button>
            </form>
        </div>
        {% endif %}
        <div class="movie-rating">‚òÖ {{ "%.1f"|format(movie.rating) }}</div>
        <h3><a href="{{ url_for('movie_detail', movie_id=movie.id) }}">{{ movie.title }}</a></h3>
        <p class="movie-year">{{ movie.year }}</p>
        <p class="movie-director">{{ movie.director or '–†–µ–∂–∏—Å—Å–µ—Ä –Ω–µ —É–∫–∞–∑–∞–Ω' }}</p>
        <p class="movie-genre">{{ movie.genre or '–ñ–∞–Ω—Ä –Ω–µ —É–∫–∞–∑–∞–Ω' }}</p>
    </div>
    {% endfor %}
</div>

<h2>üé¨ –ù–æ–≤—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è</h2>
<div class="movies-grid">
    {% for movie in new_movies %}
    <div class="movie-card">
        {% if current_user.is_authenticated %}
        <div class="movie-actions">
            <form action="{{ url_for('toggle_favorite', movie_id=movie.id) }}" method="POST" class="favorite-form">
                <button type="submit" class="favorite-btn" title="–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ">
                    ‚òÜ
                </button>
            </form>
        </div>
        {% endif %}
        <div class="movie-rating">‚òÖ {{ "%.1f"|format(movie.rating) }}</div>
        <h3><a href="{{ url_for('movie_detail', movie_id=movie.id) }}">{{ movie.title }}</a></h3>
        <p class="movie-year">{{ movie.year }}</p>
        <p class="movie-director">{{ movie.director or '–†–µ–∂–∏—Å—Å–µ—Ä –Ω–µ —É–∫–∞–∑–∞–Ω' }}</p>
        <p class="movie-genre">{{ movie.genre or '–ñ–∞–Ω—Ä –Ω–µ —É–∫–∞–∑–∞–Ω' }}</p>
    </div>
    {% endfor %}
</div>
{% endblock %}
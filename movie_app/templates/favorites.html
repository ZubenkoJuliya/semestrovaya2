{% extends "base.html" %}

{% block title %}–ò–∑–±—Ä–∞–Ω–Ω–æ–µ - –ö–∏–Ω–æ—Ç–µ–∞—Ç—Ä{% endblock %}

{% block content %}
<h1>‚≠ê –ú–æ–∏ –∏–∑–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å–º—ã</h1>

{% if favorite_movies.items %}
<p class="favorites-count">–í—Å–µ–≥–æ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Ñ–∏–ª—å–º–æ–≤: {{ favorite_movies.total }}</p>

<div class="movies-grid">
    {% for movie in favorite_movies.items %}
    <div class="movie-card">
        <div class="movie-actions">
            <form action="{{ url_for('toggle_favorite', movie_id=movie.id) }}" method="POST" class="favorite-form">
                <button type="submit" class="favorite-btn favorite-active" title="–£–¥–∞–ª–∏—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ">
                    ‚òÖ
                </button>
            </form>
        </div>
        <div class="movie-rating">‚òÖ {{ "%.1f"|format(movie.rating) }}</div>
        <h3><a href="{{ url_for('movie_detail', movie_id=movie.id) }}">{{ movie.title }}</a></h3>
        <p class="movie-year">{{ movie.year }}</p>
        <p class="movie-director">{{ movie.director or '–†–µ–∂–∏—Å—Å–µ—Ä –Ω–µ —É–∫–∞–∑–∞–Ω' }}</p>
        <p class="movie-genre">{{ movie.genre or '–ñ–∞–Ω—Ä –Ω–µ —É–∫–∞–∑–∞–Ω' }}</p>
        <div class="movie-stats">
            <small>üí¨ {{ movie.reviews.count() }}</small>
        </div>
    </div>
    {% endfor %}
</div>

{% if favorite_movies.pages > 1 %}
<div class="pagination">
    {% if favorite_movies.has_prev %}
    <a href="{{ url_for('favorites', page=favorite_movies.prev_num) }}" class="page-link">‚Üê –ù–∞–∑–∞–¥</a>
    {% endif %}

    <span class="page-info">–°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ favorite_movies.page }} –∏–∑ {{ favorite_movies.pages }}</span>

    {% if favorite_movies.has_next %}
    <a href="{{ url_for('favorites', page=favorite_movies.next_num) }}" class="page-link">–í–ø–µ—Ä–µ–¥ ‚Üí</a>
    {% endif %}
</div>
{% endif %}
{% else %}
<div class="empty-favorites">
    <div class="empty-icon">‚≠ê</div>
    <h3>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Ñ–∏–ª—å–º–æ–≤</h3>
    <p>–ù–∞–π–¥–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ñ–∏–ª—å–º—ã –∏ –¥–æ–±–∞–≤—å—Ç–µ –∏—Ö –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ!</p>
    <div class="empty-actions">
        <a href="{{ url_for('movie_list') }}" class="btn btn-primary">–ù–∞–π—Ç–∏ —Ñ–∏–ª—å–º—ã</a>
        <a href="{{ url_for('index') }}" class="btn">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
</div>
{% endif %}
{% endblock %}